<!DOCTYPE HTML>

<html>

<head>
	<meta http-equiv="Content-Type"  content="text/html;  charset=utf-8"  />
    <meta name="viewport" content="width=device-width, initial-scale=1.0,maximum-scale=1.0,user-scalable=0">
<!--
	<link rel="stylesheet" href="http://code.jquery.com/mobile/1.0a4.1/jquery.mobile-1.0a4.1.min.css">
-->
	<link href="css/db.css" rel="stylesheet">
	<script src="http://code.jquery.com/jquery-1.5.min.js"></script>
	<script src="http://code.jquery.com/mobile/1.0a4.1/jquery.mobile-1.0a4.1.min.js"></script>
	<link rel="stylesheet" href="css/idangerous.swiper.css">
  	<script src="js/idangerous.swiper.js"></script>
	<style>
html {
  height: 100%;
  background: url(img/bg.png) no-repeat center center fixed; 
  -webkit-background-size: cover;
  -moz-background-size: cover;
  -o-background-size: cover;
  background-size: cover;
}
body{
	height: 100%;
	padding: 0;
	margin: 0;
	color: #787878;
}
.div100{
/*	min-height: 100%;
	width: 100%;*/
	/*padding-top: 39px;*/
}
.outer{
	margin-top: 20px;
	background: #eee6de;
	color:#333;
	width: 88%;
	margin-right: auto;
	margin-left: auto;
	display: block;
}
.inner{
	width: 92%;
	margin-right: auto;
	margin-left: auto;
	display: block;
}
/*图片预览区域CSS*/
		.preview {
			width: 100%;
			text-align: center;
			background: #c2c9cc;
			color: #FFFFFF;
			font-weight: bold;
		}
		big{
			font-size: 24px;
			font-weight: bold;
		}
/*隐藏file input*/
		.file {
			display: none;
		}
		.imgResponsive{
			width: 100%;
			height: auto;
		}
		.imgFit{
			max-width: 100%;
    		max-height: 100%;
		}
.uploadBtn{
	margin-top: 20px;
	width: 100%;
	text-align: center;
	height: 50px;
	line-height: 50px;
	background: #ccc;
	border:1px solid #aaaaaa;	
}
form{
}
	</style>
</head>

<body onload="shit();">
<!-- swiper container 滑动页面容器 -->
<div class="swiper-container">
<!-- swiper wrapper 存放滑动内容 -->
<div class="swiper-wrapper">
<!-- 滑动的页面设置成 swiper-slide -->
<div class="div100 swiper-slide" id="page1">
	<div class="outer">
		<div class="inner">
<!-- 图片递交表单 -->
		<form action="upload_file.php" id="fileinfo-1" method="post" enctype="multipart/form-data">
<!-- 添加accept参数，只能选择图片文件 -->
		<input type="file" name="file" class="file" id="file-1" accept="image/*"/> 
		<br />
<!-- 图片预览区域 -->
		<div id="preview1" class="preview" onclick="$('#file-1').click()"><big>+</big>点击上传照片</div>  
		</form>

		<p>请精选一张最能体现你2014年胭脂峰值的照片，让朋友们为你的眉毛颤抖！<br/></p>
		</div><!--inner-->
	</div><!--outer-->

	<div style="text-align:right;" class="temp">
		<img src="img/pin.png" class="pin">
	</div>

	<img src="img/nextArrow.png" class="imgCenter" id="upBtn-1" style="width:33px; height:17px;"/>

</div><!-- div100 -->

<div class="div100 swiper-slide" id="page2">
	<div class="outer">
		<div class="inner">
<!-- 图片递交表单 -->
		<form action="upload_file.php" id="fileinfo-2" method="post" enctype="multipart/form-data">
<!-- 添加accept参数，只能选择图片文件 -->
		<input type="file" name="file" class="file" id="file-2" accept="image/*"/> 
		<br />
<!-- 图片预览区域 -->
		<div id="preview2" class="preview" onclick="$('#file-2').click()"><big>+</big>点击上传照片</div>  
		</form>

		<p>请精选一张最能体现你2014年胭脂峰值的照片，让朋友们为你的眉毛颤抖！<br/></p>
		</div><!--inner-->
	</div><!--outer-->

	<div style="text-align:right;" class="temp">
		<img src="img/pin.png" class="pin">
	</div>

	<img src="img/nextArrow.png" class="imgCenter" id="upBtn-2" style="width:33px; height:17px;"/>

</div><!-- div100 -->

<div class="div100 swiper-slide" id="page3">
	<div class="outer">
		<div class="inner">
<!-- 图片递交表单 -->
		<form action="upload_file.php" id="fileinfo-3" method="post" enctype="multipart/form-data">
<!-- 添加accept参数，只能选择图片文件 -->
		<input type="file" name="file" class="file" id="file-3" accept="image/*"/> 
		<br />
<!-- 图片预览区域 -->
		<div id="preview3" class="preview" onclick="$('#file-3').click()"><big>+</big>点击上传照片</div>  
		</form>

		<p>请精选一张最能体现你2014年胭脂峰值的照片，让朋友们为你的眉毛颤抖！<br/></p>
		</div><!--inner-->
	</div><!--outer-->

	<div style="text-align:right;" class="temp">
		<img src="img/pin.png" class="pin">
	</div>

	<img src="img/nextArrow.png" class="imgCenter" id="upBtn-3" style="width:33px; height:17px;"/>

</div><!-- div100 -->


<div class="div100 swiper-slide" id="page4">
	<div class="outer">
		<div class="inner">
<!-- 图片递交表单 -->
		<form action="upload_file.php" id="fileinfo-4" method="post" enctype="multipart/form-data">
<!-- 添加accept参数，只能选择图片文件 -->
		<input type="file" name="file" class="file" id="file-4" accept="image/*"/> 
		<br />
<!-- 图片预览区域 -->
		<div id="preview4" class="preview" onclick="$('#file-4').click()"><big>+</big>点击上传照片</div>  
		</form>

		<p>这里的话少点好嘛？我们屏幕已经不够用了...<br><br/></p>
		</div><!--inner-->
	</div><!--outer-->

	<div style="text-align:right;" class="temp">
		<img src="img/pin.png" class="pin">
	</div>

	<img src="img/nextArrow.png" class="imgCenter" id="upBtn-4" style="width:33px; height:17px;"/>

</div><!-- div100 -->

</div> <!-- div wrapper-->
</div><!-- div container-->



<!--footer & its padding div-->
<div style="height:58px;"></div>
<div id="footer">
  <img src="img/bottom.png" class="img-responsive imgCenter">    
</div>

</body>
</html>






<script type="text/javascript">  
// 负责滑动的Object
var mySwiper;
$(document).ready(function(){


	var preW = $('.preview').width();
	$('.preview').height(preW);
	$('.preview').css("line-height", preW+"px");


		$(function(){
		mySwiper = $('.swiper-container').swiper({
//Swiper Option
    mode:'vertical',
    loop: false,
    speed: 400
  });
})

});
function shit(){
	var outer = $('.outer').height() + 40;
	$('.pin').css({"position":"relative", "top": outer*(-1) + "px", "right": "30px"});
	$('.temp').css({"height": "1px"});
}
//图片上传AJAX


		$(".imgCenter").click(function()
		{	//判断是否选择了图片
			var parentEle = $(this).attr("id");
			//var imgPath = parentEle.children('input[type=file]').val();
			var num = parentEle.substring(parentEle.length - 1);
			var fileSelector = "#file-" + num;
			var imgPath = $(fileSelector).val();
			if (imgPath == "") {
				alert("请选择上传的图片");
				return;
			}
//创建表单数据，用于AJAX上传
			var fileinfoID = "fileinfo-" + num;
			var fd = new FormData(document.getElementById(fileinfoID));
//第二个参数填入用户ID
			fd.append("userid", "123456");
//第二个参数填入用户照片的标号，应该跟当前页面相关
//服务器图片将以 userid-imgnum.jpg (或其他图片格式) 命名
			fd.append("imgnum", num);
			$.ajax({
			  url: "upload_file.php",
			  type: "POST",
			  data: fd,
			  processData: false, 
			  contentType: false, 
			  success: uploadSuccess,
			  error: uploadFail
			});
		})
//上传成功后的回调函数
		function uploadSuccess(data) {
			mySwiper.swipeNext(false);
			//alert(data);
		}
		function uploadFail(data) {
			alert("图片上传失败");
		}
// 两种图片预览的方法
// 方法1：使用URL
        function preview1(file) {
            var img = new Image(), url = img.src = URL.createObjectURL(file);
            //img.addClass("imgFit");
            var $img = $(img);
            //$img.addClass("imgFit");
            img.onload = function() {
                URL.revokeObjectURL(url);
                $('#preview1').empty().append($img);
            }  
        }  
//方法2：使用FileReader（HTML5新增）
        function preview2(file, num) {  
            var reader = new FileReader();
            reader.onload = function(e) {  
                var $img = $('<img>').attr("src", e.target.result);
                var previewSelector = "#preview" + num;
                $(previewSelector).empty().append($img);
                $('img').addClass("imgFit");
            }  
            reader.readAsDataURL(file);
        }  
//选择图片时把显示预览图，选择方法2预览图片
        $(function() {  
            $('#file-1, #file-2, #file-3, #file-4').change(function(e) {  
                var file = e.target.files[0];
                var fileid = $(this).attr("id");
                var filenum = fileid.substring(fileid.length - 1);
                preview2(file, filenum);
            })  
        })    
    </script>  